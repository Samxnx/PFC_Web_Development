{"ast":null,"code":"var _jsxFileName = \"/Users/rohanchaudhari/Downloads/react-red-onion-restaurant-master/src/components/CartReview/CartReview.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { getDatabaseCart, removeFromDatabaseCart } from \"../../utilities/databaseManager\";\nimport demoData from \"../../demoData\";\nimport CartReviewItem from \"../CartReviewItem/CartReviewItem\";\nimport CartHidden from \"../CartHidden/CartHidden\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { collection, addDoc } from \"firebase/firestore\";\nimport fireStoreDB from \"../../firebase\";\nconst CartReview = () => {\n  _s();\n  const [cart, setCart] = useState([]);\n  const [address, setAddress] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [delivery, setDelivery] = useState(\"\");\n  const removeItem = productKey => {\n    console.log(\"removed\", productKey);\n    const newRemoveCart = cart.filter(pd => pd.keys !== productKey);\n    setCart(newRemoveCart);\n    removeFromDatabaseCart(productKey);\n  };\n  useEffect(() => {\n    //useEffect here to load data from local storage\n    const getSavedDataFromLS = getDatabaseCart();\n    const itemKeys = Object.keys(getSavedDataFromLS);\n    //retrive ls data key and match with demoData key\n    //find all matches and get data\n    const cartProducts = itemKeys.map(key => {\n      const product = demoData.find(fd => fd.keys === key);\n      // console.log(product)\n      product.quantity = getSavedDataFromLS[key];\n      return product;\n    });\n    setCart(cartProducts);\n  }, []);\n  const handleClick = async () => {\n    try {\n      let total = cart.reduce((total, item) => total + item.price * item.quantity, 0);\n      if (total > 30) {\n        delivery = 3;\n      } else if (total > 1 && total < 30) {\n        delivery = 5;\n      } else {\n        delivery = 0;\n      }\n      let grandTotal = total + delivery;\n      const docRef = await addDoc(collection(fireStoreDB, \"orders\"), {\n        address,\n        phone,\n        delivery,\n        orders: cart,\n        total: grandTotal\n      });\n      console.log(\"Document written with ID: \", docRef.id);\n    } catch (e) {\n      console.error(\"Error adding document: \", e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container py-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, \"Address\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Budhwarpeth\",\n    onChange: e => setAddress(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, \"Phone\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"number\",\n    placeholder: \"088\",\n    onChange: e => setPhone(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, \"Delivery Details\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"textarea\",\n    rows: \"3\",\n    onChange: e => setDelivery(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn btn-danger\",\n    size: \"lg\",\n    block: true,\n    onClick: () => handleClick(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, \"Save & Continue\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 16\n    }\n  }, cart.map(pd => /*#__PURE__*/React.createElement(CartReviewItem, {\n    removeItem: removeItem,\n    foodsToReview: pd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 16\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CartHidden, {\n    cart: cart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }))));\n};\n_s(CartReview, \"Ng1iNmRCCII+VA9B4QvBaS2Fubg=\");\n_c = CartReview;\nexport default CartReview;\nvar _c;\n$RefreshReg$(_c, \"CartReview\");","map":{"version":3,"names":["React","useEffect","useState","getDatabaseCart","removeFromDatabaseCart","demoData","CartReviewItem","CartHidden","Form","Button","collection","addDoc","fireStoreDB","CartReview","_s","cart","setCart","address","setAddress","phone","setPhone","delivery","setDelivery","removeItem","productKey","console","log","newRemoveCart","filter","pd","keys","getSavedDataFromLS","itemKeys","Object","cartProducts","map","key","product","find","fd","quantity","handleClick","total","reduce","item","price","grandTotal","docRef","orders","id","e","error","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Group","Label","Control","type","placeholder","onChange","target","value","as","rows","size","block","onClick","foodsToReview","_c","$RefreshReg$"],"sources":["/Users/rohanchaudhari/Downloads/react-red-onion-restaurant-master/src/components/CartReview/CartReview.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  getDatabaseCart,\n  removeFromDatabaseCart,\n} from \"../../utilities/databaseManager\";\nimport demoData from \"../../demoData\";\nimport CartReviewItem from \"../CartReviewItem/CartReviewItem\";\nimport CartHidden from \"../CartHidden/CartHidden\";\nimport { Form,Button } from \"react-bootstrap\";\nimport { collection, addDoc } from \"firebase/firestore\";\nimport fireStoreDB from \"../../firebase\";\n\nconst CartReview = () => {\n  const [cart, setCart] = useState([]);\n  const [address, setAddress] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [delivery, setDelivery] = useState(\"\");\n\n\n  const removeItem = (productKey) => {\n    console.log(\"removed\", productKey);\n    const newRemoveCart = cart.filter((pd) => pd.keys !== productKey);\n    setCart(newRemoveCart);\n    removeFromDatabaseCart(productKey);\n  };\n  useEffect(() => {\n    //useEffect here to load data from local storage\n    const getSavedDataFromLS = getDatabaseCart();\n    const itemKeys = Object.keys(getSavedDataFromLS);\n    //retrive ls data key and match with demoData key\n    //find all matches and get data\n    const cartProducts = itemKeys.map((key) => {\n      const product = demoData.find((fd) => fd.keys === key);\n      // console.log(product)\n      product.quantity = getSavedDataFromLS[key];\n      return product;\n    });\n    setCart(cartProducts);\n  }, []);\n\n  const handleClick = async () => {\n    try {\n      let total = cart.reduce(\n        (total, item) => total + item.price * item.quantity,\n        0\n      );\n      if(total>30){\n        delivery=3\n      }else if(total>1 && total <30){\n        delivery=5\n      }else{\n        delivery=0\n      }\n      let grandTotal = total + delivery;\n      const docRef = await addDoc(collection(fireStoreDB, \"orders\"), {\n        address,\n        phone,\n        delivery,\n        orders: cart,\n        total:grandTotal  \n      });\n      console.log(\"Document written with ID: \", docRef.id);\n    } catch (e) {\n      console.error(\"Error adding document: \", e);\n    }\n  }\n\n  return (\n    <div className=\"container py-5\">\n      {/* <div className=\"float-left\">\n      {cart.map((pd) => (\n        <CartReviewItem\n          removeItem={removeItem}\n          foodsToReview={pd}\n        ></CartReviewItem>\n      ))}\n     </div>\n     <div className=\"float-right\">\n       <CartHidden cart={cart}></CartHidden>\n     </div> */}\n      <div className=\"row\">\n        <div className=\"col-md-4\">\n          <Form>\n            <Form.Group>\n              <Form.Label>Address</Form.Label>\n              <Form.Control type=\"text\" placeholder=\"Budhwarpeth\"  onChange={(e)=>setAddress(e.target.value)}/>\n              <Form.Label>Phone</Form.Label>\n              <Form.Control type=\"number\" placeholder=\"088\" onChange={(e)=>setPhone(e.target.value)}/>\n              <Form.Label>Delivery Details</Form.Label>\n              <Form.Control as=\"textarea\" rows=\"3\" onChange={(e)=>setDelivery(e.target.value)}/>\n            </Form.Group>\n            <Button className=\"btn btn-danger\" size=\"lg\" block onClick={()=>handleClick()}>Save & Continue</Button>\n          </Form>\n        </div>\n        <div className=\"col-md-5\">\n          {\n             <div>\n               <div className=\"\">\n             {cart.map((pd) => (\n               <CartReviewItem\n                 removeItem={removeItem}\n                 foodsToReview={pd}\n               ></CartReviewItem>\n             ))}\n            </div>\n             </div>\n          }\n        </div>\n        <div className=\"col-md-3\">\n              <CartHidden cart={cart}></CartHidden>\n            </div> \n      </div>\n    </div>\n  );\n};\n\nexport default CartReview;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}