{"ast":null,"code":"var _jsxFileName = \"/Users/rohanchaudhari/Downloads/react-red-onion-restaurant-master/src/components/CartReview/CartReview.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { getDatabaseCart, removeFromDatabaseCart } from \"../../utilities/databaseManager\";\nimport demoData from \"../../demoData\";\nimport CartReviewItem from \"../CartReviewItem/CartReviewItem\";\nimport CartHidden from \"../CartHidden/CartHidden\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { collection, addDoc } from \"firebase/firestore\";\nimport fireStoreDB from \"../../firebase\";\nconst CartReview = () => {\n  _s();\n  const [cart, setCart] = useState([]);\n  const [address, setAddress] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [delivery, setDelivery] = useState(\"\");\n  const [total, setTotal] = useState();\n  const removeItem = productKey => {\n    console.log(\"removed\", productKey);\n    const newRemoveCart = cart.filter(pd => pd.keys !== productKey);\n    setCart(newRemoveCart);\n    removeFromDatabaseCart(productKey);\n  };\n  useEffect(() => {\n    //useEffect here to load data from local storage\n    const getSavedDataFromLS = getDatabaseCart();\n    const itemKeys = Object.keys(getSavedDataFromLS);\n    //retrive ls data key and match with demoData key\n    //find all matches and get data\n    const cartProducts = itemKeys.map(key => {\n      const product = demoData.find(fd => fd.keys === key);\n      // console.log(product)\n      product.quantity = getSavedDataFromLS[key];\n      return product;\n    });\n    setCart(cartProducts);\n  }, []);\n  const handleClick = async () => {\n    try {\n      const total = cart.reduce((total, item) => total + item.price * item.quantity, 0);\n      if (total > 30) {\n        delivery = 3;\n      } else if (total > 1 && total < 30) {\n        delivery = 5;\n      } else {\n        delivery = 0;\n      }\n      const grandTotal = total + delivery;\n      const docRef = await addDoc(collection(fireStoreDB, \"orders\"), {\n        address,\n        phone,\n        delivery,\n        orders: cart,\n        total: grandTotal\n      });\n      console.log(\"Document written with ID: \", docRef.id);\n    } catch (e) {\n      console.error(\"Error adding document: \", e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container py-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, \"Address\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Budhwarpeth\",\n    onChange: e => setAddress(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }, \"Phone\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"number\",\n    placeholder: \"088\",\n    onChange: e => setPhone(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  }, \"Delivery Details\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"textarea\",\n    rows: \"3\",\n    onChange: e => setDelivery(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn btn-danger\",\n    size: \"lg\",\n    block: true,\n    onClick: () => handleClick(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, \"Save & Continue\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 16\n    }\n  }, cart.map(pd => /*#__PURE__*/React.createElement(CartReviewItem, {\n    removeItem: removeItem,\n    foodsToReview: pd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 16\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CartHidden, {\n    cart: cart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }))));\n};\n_s(CartReview, \"rM/07eQWrd5y0GieIj1CRD5T8cs=\");\n_c = CartReview;\nexport default CartReview;\nvar _c;\n$RefreshReg$(_c, \"CartReview\");","map":{"version":3,"names":["React","useEffect","useState","getDatabaseCart","removeFromDatabaseCart","demoData","CartReviewItem","CartHidden","Form","Button","collection","addDoc","fireStoreDB","CartReview","_s","cart","setCart","address","setAddress","phone","setPhone","delivery","setDelivery","total","setTotal","removeItem","productKey","console","log","newRemoveCart","filter","pd","keys","getSavedDataFromLS","itemKeys","Object","cartProducts","map","key","product","find","fd","quantity","handleClick","reduce","item","price","grandTotal","docRef","orders","id","e","error","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Group","Label","Control","type","placeholder","onChange","target","value","as","rows","size","block","onClick","foodsToReview","_c","$RefreshReg$"],"sources":["/Users/rohanchaudhari/Downloads/react-red-onion-restaurant-master/src/components/CartReview/CartReview.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  getDatabaseCart,\n  removeFromDatabaseCart,\n} from \"../../utilities/databaseManager\";\nimport demoData from \"../../demoData\";\nimport CartReviewItem from \"../CartReviewItem/CartReviewItem\";\nimport CartHidden from \"../CartHidden/CartHidden\";\nimport { Form,Button } from \"react-bootstrap\";\nimport { collection, addDoc } from \"firebase/firestore\";\nimport fireStoreDB from \"../../firebase\";\n\nconst CartReview = () => {\n  const [cart, setCart] = useState([]);\n  const [address, setAddress] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [delivery, setDelivery] = useState(\"\");\n  const [total, setTotal] = useState();\n\n\n  const removeItem = (productKey) => {\n    console.log(\"removed\", productKey);\n    const newRemoveCart = cart.filter((pd) => pd.keys !== productKey);\n    setCart(newRemoveCart);\n    removeFromDatabaseCart(productKey);\n  };\n  useEffect(() => {\n    //useEffect here to load data from local storage\n    const getSavedDataFromLS = getDatabaseCart();\n    const itemKeys = Object.keys(getSavedDataFromLS);\n    //retrive ls data key and match with demoData key\n    //find all matches and get data\n    const cartProducts = itemKeys.map((key) => {\n      const product = demoData.find((fd) => fd.keys === key);\n      // console.log(product)\n      product.quantity = getSavedDataFromLS[key];\n      return product;\n    });\n    setCart(cartProducts);\n  }, []);\n\n  const handleClick = async () => {\n    try {\n      const total = cart.reduce(\n        (total, item) => total + item.price * item.quantity,\n        0\n      );\n      if(total>30){\n        delivery=3\n      }else if(total>1 && total <30){\n        delivery=5\n      }else{\n        delivery=0\n      }\n      const grandTotal = total + delivery;\n      const docRef = await addDoc(collection(fireStoreDB, \"orders\"), {\n        address,\n        phone,\n        delivery,\n        orders: cart,\n        total:grandTotal  \n      });\n      console.log(\"Document written with ID: \", docRef.id);\n    } catch (e) {\n      console.error(\"Error adding document: \", e);\n    }\n  }\n\n  return (\n    <div className=\"container py-5\">\n      {/* <div className=\"float-left\">\n      {cart.map((pd) => (\n        <CartReviewItem\n          removeItem={removeItem}\n          foodsToReview={pd}\n        ></CartReviewItem>\n      ))}\n     </div>\n     <div className=\"float-right\">\n       <CartHidden cart={cart}></CartHidden>\n     </div> */}\n      <div className=\"row\">\n        <div className=\"col-md-4\">\n          <Form>\n            <Form.Group>\n              <Form.Label>Address</Form.Label>\n              <Form.Control type=\"text\" placeholder=\"Budhwarpeth\"  onChange={(e)=>setAddress(e.target.value)}/>\n              <Form.Label>Phone</Form.Label>\n              <Form.Control type=\"number\" placeholder=\"088\" onChange={(e)=>setPhone(e.target.value)}/>\n              <Form.Label>Delivery Details</Form.Label>\n              <Form.Control as=\"textarea\" rows=\"3\" onChange={(e)=>setDelivery(e.target.value)}/>\n            </Form.Group>\n            <Button className=\"btn btn-danger\" size=\"lg\" block onClick={()=>handleClick()}>Save & Continue</Button>\n          </Form>\n        </div>\n        <div className=\"col-md-5\">\n          {\n             <div>\n               <div className=\"\">\n             {cart.map((pd) => (\n               <CartReviewItem\n                 removeItem={removeItem}\n                 foodsToReview={pd}\n               ></CartReviewItem>\n             ))}\n            </div>\n             </div>\n          }\n        </div>\n        <div className=\"col-md-3\">\n              <CartHidden cart={cart}></CartHidden>\n            </div> \n      </div>\n    </div>\n  );\n};\n\nexport default CartReview;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}