{"ast":null,"code":"var _jsxFileName = \"/Users/rohanchaudhari/Downloads/react-red-onion-restaurant-master/src/components/CartReview/CartReview.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { getDatabaseCart, removeFromDatabaseCart } from \"../../utilities/databaseManager\";\nimport demoData from \"../../demoData\";\nimport CartReviewItem from \"../CartReviewItem/CartReviewItem\";\nimport CartHidden from \"../CartHidden/CartHidden\";\nimport { Form, Button } from \"react-bootstrap\";\nimport { collection, addDoc } from \"firebase/firestore\";\nimport fireStoreDB from \"../../firebase\";\nconst CartReview = () => {\n  _s();\n  const [cart, setCart] = useState([]);\n  const [address, setAddress] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [delivery, setDelivery] = useState(\"\");\n  const removeItem = productKey => {\n    console.log(\"removed\", productKey);\n    const newRemoveCart = cart.filter(pd => pd.keys !== productKey);\n    setCart(newRemoveCart);\n    removeFromDatabaseCart(productKey);\n  };\n  useEffect(() => {\n    //useEffect here to load data from local storage\n    const getSavedDataFromLS = getDatabaseCart();\n    const itemKeys = Object.keys(getSavedDataFromLS);\n    //retrive ls data key and match with demoData key\n    //find all matches and get data\n    const cartProducts = itemKeys.map(key => {\n      const product = demoData.find(fd => fd.keys === key);\n      // console.log(product)\n      product.quantity = getSavedDataFromLS[key];\n      return product;\n    });\n    setCart(cartProducts);\n  }, []);\n  const handleClick = async () => {\n    try {\n      let t = cart.reduce((total, item) => total + item.price * item.quantity, 0);\n      let d = 0;\n      if (t > 30) {\n        d = 3;\n      } else if (t > 1 && t < 30) {\n        d = 5;\n      } else {\n        d = 0;\n      }\n      let grandTotal = t + d;\n      const docRef = await addDoc(collection(fireStoreDB, \"orders\"), {\n        address,\n        phone,\n        delivery,\n        orders: cart,\n        total: grandTotal\n      });\n      console.log(\"Document written with ID: \", docRef.id);\n      console.log('ugih');\n      alert('GrandTotal = ' + grandTotal);\n    } catch (e) {\n      console.error(\"Error adding document: \", e);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container py-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 15\n    }\n  }, \"Address\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Address\",\n    onChange: e => setAddress(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, \"Phone\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"number\",\n    placeholder: \"Phone number\",\n    onChange: e => setPhone(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, \"Delivery Details\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"textarea\",\n    rows: \"3\",\n    onChange: e => setDelivery(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn btn-danger\",\n    size: \"lg\",\n    block: true,\n    onClick: () => handleClick(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"Save & Continue\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 16\n    }\n  }, cart.map(pd => /*#__PURE__*/React.createElement(CartReviewItem, {\n    removeItem: removeItem,\n    foodsToReview: pd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 16\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CartHidden, {\n    cart: cart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }))));\n};\n_s(CartReview, \"Ng1iNmRCCII+VA9B4QvBaS2Fubg=\");\n_c = CartReview;\nexport default CartReview;\nvar _c;\n$RefreshReg$(_c, \"CartReview\");","map":{"version":3,"names":["React","useEffect","useState","getDatabaseCart","removeFromDatabaseCart","demoData","CartReviewItem","CartHidden","Form","Button","collection","addDoc","fireStoreDB","CartReview","_s","cart","setCart","address","setAddress","phone","setPhone","delivery","setDelivery","removeItem","productKey","console","log","newRemoveCart","filter","pd","keys","getSavedDataFromLS","itemKeys","Object","cartProducts","map","key","product","find","fd","quantity","handleClick","t","reduce","total","item","price","d","grandTotal","docRef","orders","id","alert","e","error","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Group","Label","Control","type","placeholder","onChange","target","value","as","rows","size","block","onClick","foodsToReview","_c","$RefreshReg$"],"sources":["/Users/rohanchaudhari/Downloads/react-red-onion-restaurant-master/src/components/CartReview/CartReview.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  getDatabaseCart,\n  removeFromDatabaseCart,\n} from \"../../utilities/databaseManager\";\nimport demoData from \"../../demoData\";\nimport CartReviewItem from \"../CartReviewItem/CartReviewItem\";\nimport CartHidden from \"../CartHidden/CartHidden\";\nimport { Form,Button } from \"react-bootstrap\";\nimport { collection, addDoc } from \"firebase/firestore\";\nimport fireStoreDB from \"../../firebase\";\n\nconst CartReview = () => {\n  const [cart, setCart] = useState([]);\n  const [address, setAddress] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [delivery, setDelivery] = useState(\"\");\n\n\n\n\n  const removeItem = (productKey) => {\n    console.log(\"removed\", productKey);\n    const newRemoveCart = cart.filter((pd) => pd.keys !== productKey);\n    setCart(newRemoveCart);\n    removeFromDatabaseCart(productKey);\n  };\n  useEffect(() => {\n    //useEffect here to load data from local storage\n    const getSavedDataFromLS = getDatabaseCart();\n    const itemKeys = Object.keys(getSavedDataFromLS);\n    //retrive ls data key and match with demoData key\n    //find all matches and get data\n    const cartProducts = itemKeys.map((key) => {\n      const product = demoData.find((fd) => fd.keys === key);\n      // console.log(product)\n      product.quantity = getSavedDataFromLS[key];\n      return product;\n    });\n    setCart(cartProducts);\n  }, []);\n\n  const handleClick = async () => {\n    try {\n      let t = cart.reduce(\n        (total, item) => total + item.price * item.quantity,\n        0\n        );\n        let d = 0;\n        if(t>30){\n          d=3\n        }else if(t>1 && t <30){\n          d=5\n        }else{\n          d=0\n        }\n        let grandTotal = t + d;\n        \n        const docRef = await addDoc(collection(fireStoreDB, \"orders\"), {\n          address,\n          phone,\n          delivery,\n          orders: cart,\n          total: grandTotal  \n        });\n        console.log(\"Document written with ID: \", docRef.id);\n        console.log('ugih');\n        alert('GrandTotal = ' + grandTotal);\n    } catch (e) {\n      console.error(\"Error adding document: \", e);\n    }\n  }\n\n  return (\n    <div className=\"container py-5\">\n      {/* <div className=\"float-left\">\n      {cart.map((pd) => (\n        <CartReviewItem\n          removeItem={removeItem}\n          foodsToReview={pd}\n        ></CartReviewItem>\n      ))}\n     </div>\n     <div className=\"float-right\">\n       <CartHidden cart={cart}></CartHidden>\n     </div> */}\n      <div className=\"row\">\n        <div className=\"col-md-4\">\n          <Form>\n            <Form.Group>\n              <Form.Label>Address</Form.Label>\n              <Form.Control type=\"text\" placeholder=\"Address\"  onChange={(e)=>setAddress(e.target.value)}/>\n              <Form.Label>Phone</Form.Label>\n              <Form.Control type=\"number\" placeholder=\"Phone number\" onChange={(e)=>setPhone(e.target.value)}/>\n              <Form.Label>Delivery Details</Form.Label>\n              <Form.Control as=\"textarea\" rows=\"3\" onChange={(e)=>setDelivery(e.target.value)}/>\n            </Form.Group>\n            <Button className=\"btn btn-danger\" size=\"lg\" block onClick={()=>handleClick()}>Save & Continue</Button>\n          </Form>\n        </div>\n        <div className=\"col-md-5\">\n          {\n             <div>\n               <div className=\"\">\n             {cart.map((pd) => (\n               <CartReviewItem\n                 removeItem={removeItem}\n                 foodsToReview={pd}\n               ></CartReviewItem>\n             ))}\n            </div>\n             </div>\n          }\n        </div>\n        <div className=\"col-md-3\">\n              <CartHidden cart={cart}></CartHidden>\n            </div> \n      </div>\n    </div>\n  );\n};\n\nexport default CartReview;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}